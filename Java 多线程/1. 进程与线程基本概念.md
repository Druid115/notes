## 进程与线程基本概念

### 进程产生的背景

最初，用户输入一个指令，计算机才能做出相应的操作。这种情况导致计算机往往需要等待指令的输入，效率十分低下。后来诞生了批处理操作系统，把一系列的指令一次性交给计算机执行，在一定程度上提高了效率。但由于批处理操作系统的指令运行方式仍然是串行的，内存中始终只有⼀个程序在运行，所以操作效率也不高。

批处理操作系统的瓶颈在于内存中只存在⼀个程序，为了解决这个问题，诞生出了进程。进程就是应用程序在内存中分配的空间，也就是正在运行的程序。配合 CPU 时间片轮转的方式，让操作系统的并发成为了可能。

如果⼀个进程有多个子任务时，只能逐个执行这些子任务，很影响效率。为了让这些子任务同时执行，人们又提出了线程的概念。⼀个进程包含了多个线程，每个线程负责⼀个单独的子任务。进程让操作系统的并发性成为了可能，线程让进程的内部并发成为了可能。

多进程方式确实可以实现并发，但使用多线程，有以下几个好处：

- 进程间的通信比较复杂，而线程间的通信比较简单。通常情况下，我们需要使用共享资源，这些资源在线程间的通信比较容易。
- 进程是重量级的，而线程是轻量级的，多线程方式的系统开销更小。



### 进程和线程的区别

本质的区别是**是否单独占有内存地址空间及其它系统资源（比如 I/O）**

- 进程单独占有⼀定的内存地址空间，所以进程间存在内存隔离，数据是分开的，数据共享复杂但是同步简单；而线程共享所属进程占有的内存地址空间和资源，数据共享简单，但是同步复杂。
- ⼀个进程出现问题不会影响其他进程，不影响主程序的稳定性，可靠性高；⼀个线程崩溃可能影响整个程序的稳定性，可靠性较低。
- 进程的创建和销毁不仅需要保存寄存器和栈信息，还需要资源的分配回收以及页调度，开销较大；线程只需要保存寄存器和栈信息，开销较小。

另外⼀个重要区别是，**进程是操作系统进行资源分配的基本单位，而线程是操作系统进行调度的基本单位。**